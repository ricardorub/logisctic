<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Logístico - Colores Vibrantes</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --info: #4895ef;
            --warning: #f72585;
            --danger: #b5179e;
            --light: #f8f9fa;
            --dark: #212529;
            --vibrant-1: #7209b7;
            --vibrant-2: #3a0ca3;
            --vibrant-3: #4361ee;
            --vibrant-4: #4cc9f0;
            --vibrant-5: #f72585;
        }
        
        body {
            background-color: #f5f7fb;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-2));
            color: white;
            padding: 1.5rem 0;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-4));
            color: white;
            font-weight: 600;
            border-bottom: none;
            padding: 1rem 1.25rem;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-left: 4px solid var(--vibrant-5);
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--vibrant-2);
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .gauge-container {
            position: relative;
            height: 200px;
        }
        
        .heatmap-cell {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: 600;
            color: white;
        }
        
        .toggle-container {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
        }
        
        .toggle-btn {
            padding: 0.5rem 1.5rem;
            border: 2px solid var(--vibrant-3);
            background: white;
            color: var(--vibrant-3);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .toggle-btn.active {
            background: var(--vibrant-3);
            color: white;
        }
        
        .toggle-btn:first-child {
            border-radius: 30px 0 0 30px;
        }
        
        .toggle-btn:last-child {
            border-radius: 0 30px 30px 0;
        }
        
        .comparison-section {
            display: none;
        }
        
        .comparison-section.active {
            display: block;
        }
        
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
        }
        
        .vibrant-bg-1 {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-2));
        }
        
        .vibrant-bg-2 {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-4));
        }
        
        .vibrant-bg-3 {
            background: linear-gradient(135deg, var(--vibrant-5), #b5179e);
        }
        
        .progress {
            height: 10px;
            border-radius: 5px;
        }
        
        .progress-bar {
            border-radius: 5px;
        }
    </style>
</head>
<body>
    {% include 'sidebar.html' %}

    <div class="main">
    <!-- Header -->
    <header class="dashboard-header mb-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="h2 mb-0">Dashboard Logístico</h1>
                    <p class="mb-0">Monitoreo en tiempo real </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <span class="badge bg-light text-dark p-2">Actualizado: Hoy, 10:30 AM</span>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Métricas principales -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card metric-card">
                    <div class="card-body">
                        <div class="metric-value">78.5%</div>
                        <div class="metric-label">Salud Logística Global</div>
                        <div class="progress mt-2">
                            <div class="progress-bar vibrant-bg-1" role="progressbar" style="width: 78.5%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card">
                    <div class="card-body">
                        <div class="metric-value">-12.3%</div>
                        <div class="metric-label">Delta Lead Time</div>
                        <div class="progress mt-2">
                            <div class="progress-bar vibrant-bg-2" role="progressbar" style="width: 65%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card">
                    <div class="card-body">
                        <div class="metric-value">94.2%</div>
                        <div class="metric-label">Cobertura Predicha DL</div>
                        <div class="progress mt-2">
                            <div class="progress-bar vibrant-bg-3" role="progressbar" style="width: 94.2%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card">
                    <div class="card-body">
                        <div class="metric-value">S/ 24,580</div>
                        <div class="metric-label">Ahorro Estimado Soles</div>
                        <div class="progress mt-2">
                            <div class="progress-bar vibrant-bg-1" role="progressbar" style="width: 82%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 1: Salud General -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>1. Salud General</span>
                        <span class="badge bg-light text-dark">Salud_Logistica_Global</span>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="gauge-container">
                                    <canvas id="healthGauge"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="healthTrend"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 2: Lead Time -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>2. Lead Time</span>
                        <span class="badge bg-light text-dark">Delta_LeadTime_%</span>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="leadTimeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 3: Cobertura -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>3. Cobertura</span>
                        <span class="badge bg-light text-dark">Cobertura_Predicha_DL</span>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Proveedor</th>
                                        <th>Ene</th>
                                        <th>Feb</th>
                                        <th>Mar</th>
                                        <th>Abr</th>
                                        <th>May</th>
                                        <th>Jun</th>
                                    </tr>
                                </thead>
                                <tbody id="coverageTable">
                                    <!-- Los datos se cargarán con JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 4: Frecuencia -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>4. Frecuencia</span>
                        <span class="badge bg-light text-dark">Frecuencia_Predicha_DL</span>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="frequencyChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 5: Riesgo Stockout -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>5. Riesgo Stockout</span>
                        <span class="badge bg-light text-dark">Stockout_Riesgo_DL</span>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="stockoutRiskChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 6: Ahorro -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>6. Ahorro</span>
                        <span class="badge bg-light text-dark">Ahorro_Estimado_Soles</span>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card vibrant-bg-1 text-white text-center p-4">
                                    <h3>S/ 24,580</h3>
                                    <p>Ahorro Actual</p>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="savingsProjection"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección 7: Comparativa A/B -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>7. Comparativa A/B</span>
                        <span class="badge bg-light text-dark">Todas las métricas</span>
                    </div>
                    <div class="card-body">
                        <div class="toggle-container">
                            <button class="toggle-btn active" data-target="traditional">Tradicional</button>
                            <button class="toggle-btn" data-target="deep-learning">Deep Learning</button>
                        </div>
                        
                        <div id="traditional-comparison" class="comparison-section active">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header text-center vibrant-bg-2 text-white">
                                            Método Tradicional
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Precisión Predictiva</span>
                                                    <span class="badge vibrant-bg-2">72%</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Tiempo de Procesamiento</span>
                                                    <span class="badge vibrant-bg-2">4.2h</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Coste Operativo</span>
                                                    <span class="badge vibrant-bg-2">S/ 8,450</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Eficiencia</span>
                                                    <span class="badge vibrant-bg-2">68%</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="chart-container">
                                        <canvas id="traditionalChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="deep-learning-comparison" class="comparison-section">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header text-center vibrant-bg-3 text-white">
                                            Deep Learning
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Precisión Predictiva</span>
                                                    <span class="badge vibrant-bg-3">94%</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Tiempo de Procesamiento</span>
                                                    <span class="badge vibrant-bg-3">1.1h</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Coste Operativo</span>
                                                    <span class="badge vibrant-bg-3">S/ 5,210</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Eficiencia</span>
                                                    <span class="badge vibrant-bg-3">92%</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="chart-container">
                                        <canvas id="deepLearningChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Datos de ejemplo para el heatmap de cobertura
        const providers = ['ProvGlobal S.A.', 'Suministros Rápidos', 'LogiTech Perú', 'Abastecedora Nacional', 'Distribuidora Andina'];
        const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'];
        
        // Generar datos aleatorios para la tabla de cobertura
        function generateCoverageData() {
            const tableBody = document.getElementById('coverageTable');
            tableBody.innerHTML = '';
            
            providers.forEach(provider => {
                const row = document.createElement('tr');
                let rowHTML = `<td>${provider}</td>`;
                
                months.forEach(() => {
                    const coverage = Math.floor(Math.random() * 30) + 70; // Entre 70% y 100%
                    let colorClass;
                    
                    if (coverage >= 95) colorClass = 'bg-success';
                    else if (coverage >= 85) colorClass = 'bg-info';
                    else if (coverage >= 75) colorClass = 'bg-warning';
                    else colorClass = 'bg-danger';
                    
                    rowHTML += `<td><div class="heatmap-cell ${colorClass}">${coverage}%</div></td>`;
                });
                
                row.innerHTML = rowHTML;
                tableBody.appendChild(row);
            });
        }
        
        // Inicializar gráficos
        document.addEventListener('DOMContentLoaded', function() {
            generateCoverageData();
            
            // Gráfico de Salud General - Gauge
            const healthGaugeCtx = document.getElementById('healthGauge').getContext('2d');
            const healthGauge = new Chart(healthGaugeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Salud Actual', 'Restante'],
                    datasets: [{
                        data: [78.5, 21.5],
                        backgroundColor: [getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3'), '#e9ecef'],
                        borderWidth: 0
                    }]
                },
                options: {
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: false
                        }
                    }
                }
            });
            
            // Gráfico de Tendencia de Salud
            const healthTrendCtx = document.getElementById('healthTrend').getContext('2d');
            const healthTrend = new Chart(healthTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Salud Logística',
                        data: [72, 75, 74, 76, 78, 78.5],
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3'),
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 70,
                            max: 85
                        }
                    }
                }
            });
            
            // Gráfico de Lead Time
            const leadTimeCtx = document.getElementById('leadTimeChart').getContext('2d');
            const leadTimeChart = new Chart(leadTimeCtx, {
                type: 'bar',
                data: {
                    labels: ['ProvGlobal', 'Suministros', 'LogiTech', 'Abastecedora', 'Distribuidora'],
                    datasets: [
                        {
                            label: 'Lead Time Anterior',
                            data: [12, 15, 10, 14, 13],
                            backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-1')
                        },
                        {
                            label: 'Lead Time Actual',
                            data: [10, 13, 8, 12, 11],
                            backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-4')
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
            
            // Gráfico de Frecuencia
            const frequencyCtx = document.getElementById('frequencyChart').getContext('2d');
            const frequencyChart = new Chart(frequencyCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Frecuencia Predicha',
                        data: [85, 82, 88, 90, 87, 92],
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-5'),
                        backgroundColor: 'rgba(247, 37, 133, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Gráfico de Riesgo Stockout
            const stockoutRiskCtx = document.getElementById('stockoutRiskChart').getContext('2d');
            const stockoutRiskChart = new Chart(stockoutRiskCtx, {
                type: 'bar',
                data: {
                    labels: ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004', 'SKU-005', 'SKU-006', 'SKU-007', 'SKU-008'],
                    datasets: [{
                        label: 'Riesgo Stockout (%)',
                        data: [15, 8, 22, 5, 12, 18, 9, 25],
                        backgroundColor: [
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-1'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-2'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-4'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-5'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-1'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-2'),
                            getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3')
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Gráfico de Proyección de Ahorro
            const savingsCtx = document.getElementById('savingsProjection').getContext('2d');
            const savingsChart = new Chart(savingsCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: 'Ahorro Acumulado (S/)',
                        data: [5200, 8500, 11200, 14500, 17800, 21500, 24580, 27800, 31200, 34800, 38500, 42500],
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-1'),
                        backgroundColor: 'rgba(114, 9, 183, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Gráficos de Comparativa A/B
            const traditionalCtx = document.getElementById('traditionalChart').getContext('2d');
            const traditionalChart = new Chart(traditionalCtx, {
                type: 'radar',
                data: {
                    labels: ['Precisión', 'Velocidad', 'Eficiencia', 'Cobertura', 'Ahorro'],
                    datasets: [{
                        label: 'Método Tradicional',
                        data: [72, 65, 68, 70, 75],
                        backgroundColor: 'rgba(67, 97, 238, 0.2)',
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3'),
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-3')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
            
            const deepLearningCtx = document.getElementById('deepLearningChart').getContext('2d');
            const deepLearningChart = new Chart(deepLearningCtx, {
                type: 'radar',
                data: {
                    labels: ['Precisión', 'Velocidad', 'Eficiencia', 'Cobertura', 'Ahorro'],
                    datasets: [{
                        label: 'Deep Learning',
                        data: [94, 88, 92, 95, 90],
                        backgroundColor: 'rgba(247, 37, 133, 0.2)',
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-5'),
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--vibrant-5')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
            
            // Toggle para comparativa A/B
            document.querySelectorAll('.toggle-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    
                    // Actualizar botones activos
                    document.querySelectorAll('.toggle-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Mostrar sección correspondiente
                    document.querySelectorAll('.comparison-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(`${target}-comparison`).classList.add('active');
                });
            });
        });
    </script>
    </div>
</body>
</html>